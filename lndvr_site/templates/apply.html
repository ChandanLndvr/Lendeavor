{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/apply.css' %}">
{% endblock head %}

{% block title %}Application | Lendeavor{% endblock title %}

{% block body %}
<div class="container">
    <div class="application-wrapper">
        <h2 class="text-center mb-4">Start Your Application</h2>

        <div class="step-header tabs">
            <button class="tab-button active" data-tab="business">Business Information</button>
            <button class="tab-button" data-tab="ownership">Ownership Information</button>
            <button class="tab-button" data-tab="financial">Financial Information</button>
        </div>

        <form id="multi-step-form" class="applicationForm" method="POST" enctype="multipart/form-data"
            action="{% url 'apply' %}">
            {% csrf_token %}
            <!-- Business Tab -->
            <div class="tab-content" id="business">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Legal name of business <span style="color: red;">*</span></label>
                        <input type="text" id="business_name" name="business_name" placeholder="Your business name"
                            required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">DBA</label>
                        <input type="text" id="dba" name="dba" placeholder="Doing Business As">
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Business address <span style="color: red;">*</span></label>
                    <input type="text" id="business_add" name="business_add" placeholder="Street address" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">Industry <span style="color: red;">*</span></label>
                    <input type="text" id="industry" name="industry" placeholder="e.g. Retail, Services" required>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <label class="form-label">Tax ID <span style="color: red;">*</span></label>
                        <input type="text" id="taxid" name="taxid" pattern="\d{2}-\d{7}" maxlength="10"
                            placeholder="12-3456789" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Entity Type <span style="color: red;">*</span></label>
                        <select id="entity" name="entity" required>
                            <option value="">Select</option>
                            <option>LLC</option>
                            <option>Corporation</option>
                            <option>Sole Proprietor</option>
                            <option>Partnership</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Start Date <span style="color: red;">*</span></label>
                        <input type="month" id="startdate" name="startdate" required>
                    </div>
                </div>

                <div class="text-center">
                    <button type="button" class="btn btn-primary mt-3 next-btn">Continue ▶</button>
                </div>
            </div>

            <!-- Ownership Tab -->
            <div class="tab-content" id="ownership" style="display:none;">
                <div class="row mb-3">
                    <div class="col-md-4">
                        <label class="form-label">First Name<span style="color: red;">*</span></label>
                        <input type="text" id="fname" name="fname" placeholder="First Name" required>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Middle Name</label>
                        <input type="text" id="mname" name="mname" placeholder="Middle Name">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Last Name<span style="color: red;">*</span></label>
                        <input type="text" id="lname" name="lname" placeholder="Last Name" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Date of Birth<span style="color: red;">*</span></label>
                        <input type="date" id="dob" name="dob" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Home Address<span style="color: red;">*</span></label>
                        <input type="text" id="haddress" name="haddress" placeholder="Home address" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Business Email<span style="color: red;">*</span></label>
                        <input type="email" id="bemail" name="bemail" placeholder="Business email" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Phone Number<span style="color: red;">*</span></label>
                        <input type="tel" id="phone" maxlength="10" name="phone" placeholder="Phone number" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">SSN<span style="color: red;">*</span></label>
                        <input type="text" id="ssn" name="ssn" maxlength="11" pattern="\d{3}-\d{2}-\d{4}"
                            placeholder="SSN (e.g. 123-45-6789)" title="Enter 9-digit SSN" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Your Ownership<span style="color: red;">*</span></label>
                        <input type="number" id="ownership_percent" name="ownership_percent" maxlength="3"
                            placeholder="Your ownership %" min="1" max="100" required>
                    </div>
                </div>

                <div class="text-center">
                    <button type="button" class="btn btn-secondary mt-3 back-btn">◀ Back</button>
                    <button type="button" class="btn btn-primary mt-3 next-btn">Continue ▶</button>
                </div>
            </div>

            <!-- Financial Tab -->
            <div class="tab-content" id="financial" style="display:none;">
                <div class="mb-3">
                    <label class="form-label">Monthly Revenue<span style="color:red;">*</span></label>
                    <input type="number" id="monthly_revenue" name="monthly_revenue" placeholder="Monthly Revenue"
                        required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Funds Requested<span style="color:red;">*</span></label>
                    <input type="number" id="fund" name="fund" placeholder="Enter the amount" required />
                </div>
                <div class="mb-3">
                    <label class="form-label">Do you have existing business loans?<span
                            style="color:red;">*</span></label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="existing_loans" value="yes" required />
                            <span>Yes</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="existing_loans" value="no" />
                            <span>No</span>
                        </label>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Is this your first application with us? <i style = "color: grey">(Select "YES" if you are updating your application)</i><span
                            style="color:red;">*</span></label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="application_no" value="yes" required />
                            <span>Yes</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="application_no" value="no" />
                            <span>No</span>
                        </label>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Upload Financial Statement <i style = "color: grey">(PDF only)</i><span
                            style="color:red;">*</span></label>
                    <input type="file" id="financial_statement" name="financial_statement" accept=".pdf" required />
                </div>
                <div class="mb-3">
                    <label class="terms-label">
                        <input type="checkbox" name="agree_terms" required />
                        I agree to the<a href="/terms" target="_blank">Terms and Conditions<span
                                style="color:red;">*</span></a>.
                    </label>
                </div>

                <div class="text-center">
                    <button type="button" class="btn btn-secondary mt-3 back-btn">◀ Back</button>
                    <button type="submit" class="btn btn-primary mt-3">Submit Application</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- JS -->
<script src="{% static 'js/applynow.js' %}"></script>
<!-- Auto formatter for tax id and ssn-->
<script src="{% static 'js/auto_formatter.js' %}"></script>

<!-- google api for address completion with intelligence -->
<!-- <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initAutocomplete" async
    defer></script> -->
<!-- <script src="{% static 'js/address_compln.js' %}"></script> -->

{% endblock body %}