{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/job_apply.css' %}">
{% endblock head %}

{% block title %}Job Application | {% endblock title %}


{% block body %}
<div class="job-application-container">
    <h3>{{job.Title}}</h3>
    <!-- <p>Job id: {{jobs.Job_id}}</p> -->
    <p><strong>Location:</strong> <span style="color:grey;">{{job.Location}}</span></p>
    <p><strong>Job type:</strong> <span style="color:grey;">{{job.Job_type}}</span></p>
    <p><strong>Work mode:</strong> <span style="color:grey;">{{job.Work_mode}}</span></p>
    <p><strong>Description:</strong> <span style="color:grey;">{{job.Description}}</span></p>
    <p><strong>Skills:</strong> <span style="color:grey;">{{job.Skills}}</span></p>
    <p><strong>Salary:</strong> <span style="color:grey;">$ {{job.Salary}}</span></p>
    <p><strong>Email:</strong> <span style="color:grey;">{{job.Email}}</span></p>
    <p><strong>About Us:</strong><span style="color:grey;">
            At Lendeavor, we believe that every small business has the potential to thrive. We're committed to
            helping entrepreneurs achieve their dreams by providing access to the funding they need.
            With our strong network of 80+ trusted lenders, we make financing fast, secure, and transparent tailored to
            your
            unique journey.
        </span>
    </p>
    <p><strong>Our services:</strong><span style="color:grey;">
            Finding the right financing shouldn't be overwhelming. Thatâ€™s why Lendeavor is here to simplify your path to
            capital.
            Whether you need working capital, equipment financing, or a long-term funding strategy, our team guides you
            with
            expertise, clarity, and care.
        </span>
    </p>
    <br />
    <h5>Fill the form to apply for this position:</h5>
    <div class="sparkle-divider"></div>
    <br />
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="mb-3">
            <label class="form-label text-white">First Name:<span style="color:red;">*</span></label>
            <input type='text' name="fname" class="fname" id="fname" value="{{form_data.fname|default:''}}" required>
        </div>
        <div class="mb-3">
            <label class="form-label text-white">Last Name:<span style="color:red;">*</span></label>
            <input type='text' name="lname" class="lname" id="lname" value="{{form_data.lname|default:''}}" required>
        </div>
        <div class="mb-3">
            <label class="form-label text-white">Email:<span style="color:red;">*</span></label>
            <input type='email' name="email" class="email" id="email" value="{{form_data.email|default:''}}" required>
        </div>

        <div class="mb-3 form-group">
            <label class="form-label text-white">Phone Number<span style="color:red;">*</span></label>
            <div class="input-group">
                <span class="input-group-text">+1</span>
                <input type="tel" id="phone" name="phone" maxlength="10" class="form-control" placeholder="Phone number" pattern="\d{10}" value="{{form_data.phone|default:''}}" required>
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label text-white">Experience:<span style="color:red;">*</span></label>
            <select name="experience" class="form-select" required>
                <option value="">-- Select Mode --</option>
                <option value="fresher" {% if form_data.experience == "fresher" %}selected{% endif %}>Fresher</option>
                <option value="1-2" {% if form_data.experience == "1-2" %}selected{% endif %}>1-2</option>
                <option value="3-4" {% if form_data.experience == "3-4" %}selected{% endif %}>3-4</option>
                <option value="5-7" {% if form_data.experience == "5-7" %}selected{% endif %}>5-7</option>
                <option value="8-10" {% if form_data.experience == "8-10" %}selected{% endif %}>8-10</option>
                <option value="10+" {% if form_data.experience == "10+" %}selected{% endif %}>10+</option>
            </select>
        </div>
        {% comment %} <div class="mb-3">
            <label class="form-label text-white">Qualification Level:<span style="color:red;">*</span></label>
            <select name="qualification" class="form-select" required>
                <option value="">-- Select Mode --</option>
                <option value="undergrad">Under Graduation</option>
                <option value="graduate">Graduation</option>
                <option value="postgrad">Post graduation</option>
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label text-white">Major:<span style="color:red;">*</span></label>
            <input type="text" name="major" class="major" id="major" required>
        </div>
        <div class="mb-3">
            <label class="form-label text-white">School Name:<span style="color:red;">*</span></label>
            <input type="text" name="school" class="school" id="school" required>
        </div>
        <div class="mb-3">
            <label class="form-label text-white">Degree Completion Year:<span style="color:red;">*</span></label>
            <input type="text" name="year" class="year" id="year" required>
        </div>
        <div class="mb-3">
            <label class="form-label text-white">Expected salary in $:</label>
            <input type='text' name="salary" class="salary" id="salary" maxlength="10">
        </div> {% endcomment %}
        <div class="mb-3">
            <label class="form-label text-white">Gender:<span style="color:red;">*</span></label><br>
            <input type="radio" name="gender" value="male" {% if form_data.gender == "male" %}checked{% endif %} required> <span>Male</span> &nbsp;
            <input type="radio" name="gender" value="female" {% if form_data.gender == "female" %}checked{% endif %} > <span>Female</span>
        </div>
        <div class="mb-3" style="position:relative; max-width:850px;">
            <label class="form-label text-white">Resume<span style="color:red;">*</span></label>
            
            <!-- File input wrapped in a container -->
            <input type="file" name="resume" id="resume" class="resume form-control"
                accept=".pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
                required style="padding-right:30px;">
            
            <!-- Cancel button inside input area -->
            <button type="button" id="cancelResume" style="
                position:absolute;
                right:8px;
                top:72%;
                transform:translateY(-50%);
                background:#ff4d4d;
                border:none;
                width:24px;
                height:24px;
                border-radius:50%;
                color:white;
                font-weight:bold;
                cursor:pointer;
                display:none; /* hidden initially */
            ">X</button>
        </div>
        <div>
            <button type="submit" class="btn btn-success w-100 mt-4"
                style="background: linear-gradient(90deg, #00f2ff, #007bff); color: white; font-weight: bold;">
                Submit
            </button>
        </div>
    </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const fileInput = document.getElementById("resume");
    const cancelBtn = document.getElementById("cancelResume");

    fileInput.addEventListener("change", () => {
        if (fileInput.files.length > 0) {
            cancelBtn.style.display = "flex"; // Show X
        } else {
            cancelBtn.style.display = "none"; // Hide X
        }
    });

    cancelBtn.addEventListener("click", () => {
        fileInput.value = "";            // Clear file input
        cancelBtn.style.display = "none"; // Hide X
    });
});
</script>

{% endblock body %}